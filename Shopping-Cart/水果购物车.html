<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/inputnumber.css" />
    <link rel="stylesheet" href="./css/index.css" />
    <title>è´­ç‰©è½¦</title>
  </head>
  <body>
    <div class="app-container" id="app">
      <!-- é¡¶éƒ¨banner -->
      <div class="banner-box"><img src="./img/fruit.jpg" alt="" /></div>
      <!-- é¢åŒ…å±‘ -->
      <div class="breadcrumb">
        <span>ğŸ </span>
        /
        <span>è´­ç‰©è½¦</span>
      </div>
      <!-- è´­ç‰©è½¦ä¸»ä½“ -->
      <div class="main" v-if="fruitList.length > 0">
        <div class="table">
          <!-- å¤´éƒ¨ -->
          <div class="thead">
            <div class="tr">
              <div class="th">é€‰ä¸­</div>
              <div class="th th-pic">å›¾ç‰‡</div>
              <div class="th">å•ä»·</div>
              <div class="th num-th">ä¸ªæ•°</div>
              <div class="th">å°è®¡</div>
              <div class="th">æ“ä½œ</div>
            </div>
          </div>
          <!-- èº«ä½“ -->
          <div class="tbody">
            <div class="tr" :class="{ active: item.isChecked }" v-for="(item, index) in fruitList" :key="item.id">
              <div class="td"><input type="checkbox" v-model="item.isChecked"/></div>
              <div class="td"><img :src="item.icon" alt="" /></div>
              <div class="td">{{ item.price }}</div>
              <div class="td">
                <div class="my-input-number">
                  <button :disabled="item.num <= 1" class="decrease" @click="sub(item.id)"> - </button>
                  <span class="my-input__inner">{{ item.num }}</span>
                  <button class="increase" @click="add(item.id)"> + </button>
                </div>
              </div>
              <div class="td">{{ item.num * item.price }}</div>
              <div class="td"><button @click="del(item.id)">åˆ é™¤</button></div>
            </div>


          </div>
        </div>
        <!-- åº•éƒ¨ -->
        <div class="bottom">
          <!-- å…¨é€‰ -->
          <label class="check-all">
            <input type="checkbox" v-model="isAll"/>
            å…¨é€‰
          </label>
          <div class="right-box">
            <!-- æ‰€æœ‰å•†å“æ€»ä»· -->
            <span class="price-box">æ€»ä»·&nbsp;&nbsp;:&nbsp;&nbsp;Â¥&nbsp;<span class="price">{{ totalPrice }}</span></span>
            <!-- ç»“ç®—æŒ‰é’® -->
            <button class="pay">ç»“ç®—( {{ totalCount }} )</button>
          </div>
        </div>
      </div>
      <!-- ç©ºè½¦ -->
      <div class="empty" v-else>ğŸ›’æš‚æ— è®¢å•</div>
    </div>
    <script src="./js/vue.js"></script>
    <script>
      const app = new Vue({
        el: '#app',
        data: {
          // æ°´æœåˆ—è¡¨
          fruitList: [
            {
              id: 1,
              icon: 'https://tse1-mm.cn.bing.net/th/id/OIP-C.WXCEh4lKuxWbRBj2DDjfXwHaE_?w=302&h=204&c=7&r=0&o=5&dpr=1.3&pid=1.7',
              isChecked: true,
              num: 2,
              price: 6,
            },
            {
              id: 2,
              icon: 'https://tse3-mm.cn.bing.net/th/id/OIP-C.mNc3TE8X1s4F967GZNMxaQHaHa?w=192&h=192&c=7&r=0&o=5&dpr=1.3&pid=1.7',
              isChecked: false,
              num: 7,
              price: 20,
            },
            {
              id: 3,
              icon: 'https://tse1-mm.cn.bing.net/th/id/OIP-C.eLHIyZHYVJc3aCQUX9TRGwHaEy?w=284&h=184&c=7&r=0&o=5&dpr=1.3&pid=1.7',
              isChecked: true,
              num: 3,
              price: 40,
            },
            {
              id: 4,
              icon: 'https://tse3-mm.cn.bing.net/th/id/OIP-C.ZPFDKWt4FVZpbPfDV56EQQHaHa?w=206&h=206&c=7&r=0&o=5&dpr=1.3&pid=1.7',
              isChecked: false,
              num: 10,
              price: 3,
            },
            {
              id: 5,
              icon: 'https://tse1-mm.cn.bing.net/th/id/OIP-C.EIg3q1KPqWWvv_GRlVWNlwHaIN?w=182&h=202&c=7&r=0&o=5&dpr=1.3&pid=1.7',
              isChecked: true,
              num: 20,
              price: 34,
            },
          ],
        },
        // æ³¨æ„computedé‡Œçš„è®¡ç®—å±æ€§è™½ç„¶æ—¶å‡½æ•°å†™æ³•ï¼Œä½†ä»ç„¶æ˜¯å±æ€§
        computed:{
            // computedæœ‰ç¼“å­˜æœºåˆ¶ï¼Œå˜é‡å€¼ä¸å˜ï¼Œç›´æ¥è¿”å›ç»“æœï¼Œä¸ç”¨åƒmenthodsé‡å¤è°ƒç”¨å‡½æ•°
            // ç®€å•å†™æ³•,ä»…æœ‰è·å–ï¼Œä¸èƒ½è®¾ç½®
            // isAll (){
            //     return this.fruitList.every(item => item.isChecked === true)
            // }
            // å®Œæ•´å†™æ³•ï¼šget + set
            isAll :{
                get() {
                    return this.fruitList.every(item => item.isChecked === true)
                },
                set(value) {
                    this.fruitList.forEach(item => item.isChecked = value)
                }
            },
            totalCount() {
                return this.fruitList.reduce((sum , item) => {
                    // ä»…ç»Ÿè®¡å‹¾é€‰çš„æ°´æœ
                    if(item.isChecked === true){
                        return sum + item.num
                    }
                    else{
                        return sum
                    }
                } , 0)
            },
            totalPrice() {
                // return this.fruitList.reduce((sum , item) => xxx , 0)
                return this.fruitList.reduce((sum , item) => {
                    if(item.isChecked === true){
                        return sum + item.num * item.price
                    }
                    else{
                        return sum
                    }
                } , 0)
            }
        },
        methods :{
            del(id){
             this.fruitList = this.fruitList.filter(item => item.id !== id )
            },
            sub(id) {
                const fruit = this.fruitList.find(item => item.id === id)
                fruit.num--
            },
            add(id) {
                const fruit =this.fruitList.find(item => item.id === id)
                fruit.num++
            }
        }
      })
    </script>
  </body>
</html>
